/*
 game-chat-cef 2017-06-26 
*/

function closeChatTab(a){var t=$(a).data("chat-id");$("."+t).remove(),defaultTab(),$("#"+t).remove()}function joinMessage(a,t,e){var n;e?(n='<div class="chat-ln">New message from '+a+"</div>",$("#"+t).append(n)):(n='<div class="chat-ln">You have joined '+a+" chat</div>",$("#"+t).append(n))}function switchTab(a){var t=$(a).data("chat-id");$("#chat-input-text").data("chat-id",t)}function defaultTab(){$("#chat-input-text").data("chat-id","general"),$("#general").addClass("active"),$(".chat-tab-general").addClass("active")}function cleanChat(a){$("#"+a+" div").length>13&&$("#"+a+" div").first().remove()}function updateScroll(a){var t=$("#"+a).height();$("#"+a).stop().animate({scrollTop:t},100)}function addMessage(a,t){var e=new Date,n='<div class="chat-ln"><span class="chat-ln--time">'+(e.getHours()+":"+e.getMinutes())+'</span> <span class="chat-ln--clan">Clan Name</span> <span class="chat-ln--username">Username</span>: '+a+"</div>";$("#"+t).append(n),$("#chat-input-text").val(""),cleanChat(t),updateScroll(t)}function newPrivateMessage(a){var t="pm-"+a,e='<li class="chat-tab '+t+'"><a href="#'+t+'" data-chat-id="'+t+'" data-toggle="tab">'+a+' <span onclick="closeChatTab(this)" data-chat-id="'+t+'"><i class="fa fa-times" data-chat-id="'+t+'" aria-hidden="true"></i></span></li>',n='<div class="tab-pane chat-pane" id="'+t+'"></div>';$(".chat-tabs").append(e),$(".tab-content").append(n),eventListeners(),joinMessage(a,t,!0)}function eventListeners(){$(".chat-tab a").click(function(){switchTab(this)})}eventListeners(),$(document).keypress(function(a){13==a.which&&addMessage($("#chat-input-text").val(),$("#chat-input-text").data("chat-id"))});